import { actions } from '@/store/modules/search.store.actions'; import { datasetViewFactory } from '@/api/datasetViewFactory'; import { types } from '@/store/mutation-types';

jest.mock('@/api/datasetViewFactory', () => ({ getLinkedRefferingElement: jest.fn(), }));

describe('FETCH_LINKAGE_REFFERING_ELEMENTS_DATA Action', () => { let commit;

beforeEach(() => { commit = jest.fn(); });

it('should commit SET_LINKAGE_REFFERING_ELEMENTS with data on success', async () => { const mockData = { results: [{ id: 1, name: 'Element 1' }] }; datasetViewFactory.getLinkedRefferingElement.mockResolvedValue({ data: mockData });

await actions[types.FETCH_LINKAGE_REFFERING_ELEMENTS_DATA]({ commit }, 'test-key');

expect(commit).toHaveBeenCalledWith(types.SET_LINKAGE_REFFERING_ELEMENTS, mockData.results);

});

it('should commit MUTATE_LINKAGE_REFFERING_ELEMENTS with an empty array on error', async () => { datasetViewFactory.getLinkedRefferingElement.mockRejectedValue(new Error('API Error'));

await actions[types.FETCH_LINKAGE_REFFERING_ELEMENTS_DATA]({ commit }, 'test-key');

expect(commit).toHaveBeenCalledWith(types.MUTATE_LINKAGE_REFFERING_ELEMENTS, []);

}); });

